{"version":3,"sources":["../../../src/role-setter/routes-filterer/routes-filterer.ts"],"names":[],"mappings":"AAAA,OAAO,KAAK,CAAC,MAAM,QAAQ,CAAC;AAE5B,MAAM,CAAC,OAAO,yBAAyB,MAAM,EAAE,cAAc,EAAE,IAAI,EAAE,KAAU,EAAE,SAAc;IAA1B,sBAAA,EAAA,UAAU;IAAE,0BAAA,EAAA,cAAc;IAC7F,CAAC,CAAC,IAAI,CAAC,cAAc,EAAE,UAAA,aAAa;QAC7B,IAAA,yBAAI,EAAE,iCAAQ,EAAE,gCAAiB,CAAkB;QACxD,IAAI,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,EAAC,IAAI,MAAA,EAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAExC,EAAE,CAAA,CAAC,KAAK,CAAC,CAAC,CAAC;YACT,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;YAE3C,EAAE,CAAA,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACZ,QAAQ,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC9C,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,EAAC,QAAQ,UAAA,EAAC,CAAC,CAAC;YAC7B,CAAC;YAED,EAAE,CAAA,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACZ,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBAC3B,QAAQ,CAAC,QAAQ,GAAG,cAAc,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;YAC5E,CAAC;YAED,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC3B,CAAC;IACH,CAAC,CAAC,CAAC;IAEH,MAAM,CAAC,SAAS,CAAC;AACnB,CAAC","file":"routes-filterer.js","sourceRoot":"","sourcesContent":["import * as _ from 'lodash';\n\nexport default function routesFilterer(routes, approvedRoutes, role, paths = [], newRoutes = []) {\n  _.each(approvedRoutes, approvedRoute => {\n    let {path, children, default: _default} = approvedRoute;\n    let route = _.filter(routes, {path})[0];\n    \n    if(route) {\n      let newRoute = _.omit(route, ['children']);\n      \n      if(_default) {\n        _default = [''].concat(paths, path).join('/');\n        _.extend(role, {_default});\n      }\n      \n      if(children) {\n        paths = paths.concat(path);\n        newRoute.children = routesFilterer(route.children, children, role, paths);\n      }\n      \n      newRoutes.push(newRoute);\n    }\n  });\n  \n  return newRoutes;\n}\n"]}